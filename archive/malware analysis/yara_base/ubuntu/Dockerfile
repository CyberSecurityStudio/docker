FROM ubuntu:22.04

RUN apt-get update -y && apt-get upgrade -y
ARG DEBIAN_FRONTEND=noninteractive
ENV TZ=Etc/UTC
RUN apt-get install -y tzdata

RUN apt-get install -y software-properties-common
RUN add-apt-repository ppa:remnux/stable
RUN apt-get update

RUN apt-get install -y git wget gcc g++ make cmake autoconf automake libtool pkg-config flex bison libssl-dev libmagic-dev
RUN apt-get install -y libjansson-dev strace
RUN cd && git clone https://github.com/VirusTotal/yara && cd yara && ./bootstrap.sh && ./configure --enable-cuckoo --enable-magic --enable-dotnet --with-crypto && make && make install && ldconfig
RUN ln -s /usr/local/lib/libyara.so.8.0.0 /usr/lib/libyara.so.8
RUN cd && rm -rf *
