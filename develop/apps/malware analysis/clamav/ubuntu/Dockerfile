FROM ubuntu:latest

RUN apt update -y && apt upgrade -y
ARG DEBIAN_FRONTEND=noninteractive
ENV TZ=Etc/UTC
RUN apt install -y tzdata

RUN apt install -y software-properties-common
RUN add-apt-repository ppa:remnux/stable
RUN apt-get update

RUN apt install -y git wget gcc g++ make pkg-config python3 python3-pip python3-pytest valgrind check libbz2-dev libcurl4-openssl-dev libjson-c-dev libmilter-dev libncurses5-dev libpcre2-dev libssl-dev libxml2-dev zlib1g-dev
RUN python3 -m pip install cmake
RUN cd && git clone https://github.com/Cisco-Talos/clamav && cd clamav && mkdir build && cd build && cmake .. && cmake --build . && ctest && cmake --build . --target install
RUN cd && rm -rf *